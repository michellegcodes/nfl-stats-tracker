<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NFL Stats Tracker</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>NFL Stats Tracker</h1>
    <p class="subtitle">2024–25 Season Standings</p>
    <div class="search-wrapper">
      <input
        type="text"
        id="search"
        placeholder="Search teams..."
        autocomplete="off"
      />
    </div>
  </header>

  <main>
    <div class="grid" id="team-grid">
      {% for team in teams %}
      <a class="card" href="/team/{{ team.id }}" data-name="{{ team.display_name | lower }}">
        <div class="card-logo">
          <img src="{{ team.logo_url }}" alt="{{ team.display_name }} logo" loading="lazy" />
        </div>
        <div class="card-info">
          <div class="team-city">{{ team.city }}</div>
          <div class="team-name">{{ team.name }}</div>
          <div class="record">
            {% if team.ties > 0 %}
              {{ team.wins }}–{{ team.losses }}–{{ team.ties }}
            {% else %}
              {{ team.wins }}–{{ team.losses }}
            {% endif %}
          </div>
          <div class="win-pct">{{ team.win_pct }}%</div>
        </div>
      </a>
      {% endfor %}
    </div>

    <p class="no-results" id="no-results" style="display:none;">No teams match your search.</p>
  </main>

  <footer>
    <p>Data sourced from ESPN &middot; Updates on page load</p>
  </footer>

  <script>
    const search = document.getElementById('search');
    const cards = document.querySelectorAll('.card');
    const noResults = document.getElementById('no-results');

    search.addEventListener('input', () => {
      const query = search.value.toLowerCase().trim();
      let visible = 0;

      cards.forEach(card => {
        const name = card.dataset.name;
        if (name.includes(query)) {
          card.style.display = '';
          visible++;
        } else {
          card.style.display = 'none';
        }
      });

      noResults.style.display = visible === 0 ? 'block' : 'none';
    });
  </script>
</body>
</html>
